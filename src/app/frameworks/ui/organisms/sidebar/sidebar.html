<aside
  class="flex-shrink-0 bg-base-100 h-full border-r border-base-300 relative transition-all duration-300 ease-in-out flex flex-col"
  [style.width]="isCollapsed() ? '70px' : '256px'"
>
  <!-- Toggle Button - OUTSIDE sidebar (bulges out) -->
  <button
    type="button"
    (click)="toggleCollapse()"
    class="absolute top-11 -right-4 z-50 w-6 h-6 flex items-center justify-center rounded-full bg-base-100 border-1 border-base-300 hover:border-primary hover:scale-110 transition-all"
    [title]="isCollapsed() ? 'Expand' : 'Collapse'"
  >
    <lucide-icon
      [img]="isCollapsed() ? ChevronsRight : ChevronsLeft"
      class="w-4 h-4 text-base-content/60 hover:text-primary transition-colors"
    ></lucide-icon>
  </button>

  <!-- Navigation (scrollable middle section) -->
  <nav class="py-2 flex-1 overflow-y-auto custom-scrollbar">
    @for (item of navigationItems; track item.label) {
    <app-nav-item
      [icon]="item.icon"
      [label]="item.label"
      [href]="item.href"
      [collapsed]="isCollapsed()"
    />
    }
  </nav>

  <!-- Logout (ALWAYS VISIBLE at bottom) -->
  <div class="p-4 border-t border-base-300 flex-shrink-0 bg-base-100">
    <button
      type="button"
      (click)="onLogout($event)"
      class="flex items-center w-full text-base-content/70 hover:text-error hover:bg-error/10 rounded-lg p-2 transition-all"
      [class.justify-center]="isCollapsed()"
      [title]="isCollapsed() ? 'Log out' : ''"
    >
      <lucide-icon [img]="LogOut" class="w-5 h-5" [class.mr-3]="!isCollapsed()"></lucide-icon>
      @if (!isCollapsed()) {
      <span class="font-medium">Log out</span>
      }
    </button>
  </div>
</aside>
